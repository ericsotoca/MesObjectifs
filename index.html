<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion d'Objectifs de Vie</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        header {
            background-color: #4CAF50;
            color: white;
            padding: 1em;
            width: 100%;
            text-align: center;
        }
        main {
            padding: 1em;
            width: 100%;
            max-width: 600px;
        }
        .pilier {
            margin-bottom: 2em;
        }
        .pilier h2 {
            border-bottom: 2px solid;
            padding-bottom: 0.5em;
        }
        .sous-pilier {
            margin-bottom: 1em;
        }
        .sous-pilier h3 {
            margin-bottom: 0.5em;
        }
        .objectif {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5em;
        }
        .objectif input {
            flex-grow: 1;
            padding: 0.5em;
            margin-right: 0.5em;
            cursor: pointer;
        }
        .objectif button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 0.5em;
            cursor: pointer;
        }
        .objectif button:hover {
            background-color: #45a049;
        }
        .pilier[data-theme="sante"] h2 {
            border-color: #FF6347;
        }
        .pilier[data-theme="famille"] h2 {
            border-color: #FFD700;
        }
        .pilier[data-theme="finances"] h2 {
            border-color: #32CD32;
        }
        .pilier[data-theme="carriere"] h2 {
            border-color: #1E90FF;
        }
        .pilier[data-theme="loisirs"] h2 {
            border-color: #FF69B4;
        }
        .pilier[data-theme="devperso"] h2 {
            border-color: #8A2BE2;
        }
        .pilier[data-theme="relations"] h2 {
            border-color: #FF4500;
        }
        .pilier[data-theme="cadrevie"] h2 {
            border-color: #00CED1;
        }
    </style>
</head>
<body>
    <header>
        <h1>Gestion d'Objectifs de Vie</h1>
    </header>
    <main>
        <section id="piliers">
            <!-- Les piliers et sous-piliers seront dynamiquement générés ici -->
        </section>
    </main>
    <div id="popup" style="display:none; position:fixed; left:50%; top:50%; transform:translate(-50%, -50%); background:white; border:1px solid #ccc; padding:2em; z-index:1000;">
        <textarea id="popup-text" rows="4" cols="50"></textarea><br>
        <button onclick="modifierObjectif()">Modifier</button>
        <button onclick="supprimerObjectif()">Supprimer</button>
        <button onclick="fermerPopup()">Fermer</button>
    </div>
    <script>
        const defaultPillarsData = [
            { id: "sante", name: "Santé", theme: "sante", subPillars: [
                { id: "sante-phy", name: "Physique", court: "Améliorer sa condition physique pour se sentir plus énergique au quotidien.", moyen: "Intégrer une routine d'exercice régulière.", long: "Atteindre un niveau de forme physique optimal." },
                { id: "sante-men", name: "Mental", court: "Cultiver un état d'esprit positif pour mieux faire face aux défis de la vie.", moyen: "Pratiquer la méditation ou le journaling.", long: "Développer une résilience mentale durable." },
                { id: "sante-som", name: "Sommeil", court: "Obtenir un sommeil réparateur pour maximiser son bien-être général.", moyen: "Établir une routine de sommeil régulière.", long: "Optimiser son environnement de sommeil pour un repos optimal." },
                { id: "sante-nut", name: "Nutrition", court: "Adopter une alimentation équilibrée pour maintenir une bonne santé à long terme.", moyen: "Planifier des repas sains et équilibrés.", long: "Maintenir une alimentation saine comme mode de vie." },
                { id: "sante-ene", name: "Énergie", court: "Augmenter son niveau d'énergie pour accomplir ses tâches quotidiennes avec efficacité.", moyen: "Identifier et éliminer les sources de fatigue.", long: "Maintenir un niveau d'énergie élevé grâce à des habitudes saines." }
            ]},
            { id: "famille", name: "Famille", theme: "famille", subPillars: [
                { id: "fam-pro", name: "Proches", court: "Renforcer les liens avec ses proches pour créer un sentiment d'appartenance.", moyen: "Organiser des activités familiales régulières.", long: "Construire des relations familiales solides et durables." },
                { id: "fam-com", name: "Communication", court: "Améliorer la communication familiale pour éviter les malentendus.", moyen: "Pratiquer l'écoute active au sein de la famille.", long: "Établir une communication ouverte et honnête." },
                { id: "fam-tmp", name: "Temps passé", court: "Passer plus de moments de qualité ensemble pour renforcer les relations familiales.", moyen: "Planifier des sorties ou des activités en famille.", long: "Créer des souvenirs familiaux mémorables." },
                { id: "fam-sou", name: "Soutien", court: "Offrir et recevoir un soutien mutuel pour surmonter les difficultés.", moyen: "Être présent pour les membres de la famille en cas de besoin.", long: "Construire un réseau de soutien familial fort." },
                { id: "fam-har", name: "Harmonie", court: "Maintenir une atmosphère paisible et harmonieuse au sein de la famille.", moyen: "Résoudre les conflits de manière constructive.", long: "Créer un environnement familial serein et équilibré." }
            ]},
            { id: "finances", name: "Finances", theme: "finances", subPillars: [
                { id: "fin-0", name: "Revenus", court: "Diversifier ses sources de revenus pour accroître sa sécurité financière.", moyen: "Explorer des opportunités d'investissement.", long: "Atteindre une indépendance financière." },
                { id: "fin-1", name: "Épargne", court: "Constituer une épargne suffisante pour faire face aux imprévus.", moyen: "Établir un plan d'épargne régulier.", long: "Avoir une réserve financière conséquente." },
                { id: "fin-2", name: "Dépenses", court: "Maîtriser ses dépenses pour vivre selon ses moyens.", moyen: "Suivre et ajuster son budget régulièrement.", long: "Maintenir un équilibre financier stable." },
                { id: "fin-3", name: "Investissements", court: "Faire fructifier son argent grâce à des placements judicieux.", moyen: "Diversifier ses investissements pour minimiser les risques.", long: "Atteindre des objectifs financiers à long terme." },
                { id: "fin-4", name: "Sécurité", court: "Protéger ses finances contre les risques futurs pour assurer sa tranquillité d'esprit.", moyen: "Souscrire à des assurances adaptées.", long: "Avoir une stratégie financière sécurisée." }
            ]},
            { id: "carriere", name: "Carrière", theme: "carriere", subPillars: [
                { id: "car-0", name: "Satisfaction", court: "Trouver un équilibre entre passion et profession pour s'épanouir dans son travail.", moyen: "Identifier des opportunités de carrière alignées avec ses intérêts.", long: "Atteindre une satisfaction professionnelle durable." },
                { id: "car-1", name: "Progression", court: "Progresser régulièrement dans sa carrière pour atteindre ses ambitions professionnelles.", moyen: "Définir des étapes claires pour sa progression de carrière.", long: "Atteindre ses objectifs de carrière à long terme." },
                { id: "car-2", name: "Équilibre", court: "Maintenir un équilibre entre vie professionnelle et vie personnelle pour préserver son bien-être.", moyen: "Établir des limites claires entre travail et vie personnelle.", long: "Avoir un équilibre de vie stable et satisfaisant." },
                { id: "car-3", name: "Compétences", court: "Développer continuellement ses compétences pour rester pertinent dans son domaine.", moyen: "Suivre des formations ou des ateliers pour améliorer ses compétences.", long: "Devenir un expert reconnu dans son domaine." },
                { id: "car-4", name: "Reconnaissance", court: "Recevoir une reconnaissance appropriée pour ses efforts et ses contributions.", moyen: "Communiquer ses réussites et ses contributions à son équipe ou à ses supérieurs.", long: "Être reconnu pour ses compétences et ses réalisations." }
            ]},
            { id: "loisirs", name: "Loisirs", theme: "loisirs", subPillars: [
                { id: "loi-0", name: "Temps libre", court: "Consacrer du temps à ses loisirs pour se ressourcer pleinement.", moyen: "Planifier régulièrement des activités de loisirs.", long: "Intégrer les loisirs comme une partie essentielle de sa vie." },
                { id: "loi-1", name: "Passions", court: "Explorer et approfondir ses passions pour enrichir sa vie personnelle.", moyen: "Découvrir de nouvelles passions ou approfondir celles existantes.", long: "Vivre une vie riche en passions et en intérêts variés." },
                { id: "loi-2", name: "Détente", court: "Se détendre régulièrement pour réduire le stress et retrouver de l'énergie.", moyen: "Pratiquer des activités relaxantes régulièrement.", long: "Maintenir un niveau de stress bas grâce à des habitudes de détente." },
                { id: "loi-3", name: "Créativité", court: "Stimuler sa créativité pour découvrir de nouvelles perspectives et idées.", moyen: "Participer à des activités créatives régulièrement.", long: "Développer sa créativité comme une compétence clé." },
                { id: "loi-4", name: "Social", court: "Partager des moments de loisirs avec d'autres pour renforcer les liens sociaux.", moyen: "Organiser des activités sociales régulières.", long: "Avoir un réseau social fort et engagé." }
            ]},
            { id: "devperso", name: "Développement perso", theme: "devperso", subPillars: [
                { id: "dev-0", name: "Apprentissage", court: "Acquérir de nouvelles connaissances pour évoluer continuellement.", moyen: "Suivre des cours ou des formations pour apprendre de nouvelles compétences.", long: "Devenir un apprenant à vie." },
                { id: "dev-1", name: "Objectifs", court: "Définir et atteindre des objectifs clairs pour donner un sens à ses actions.", moyen: "Établir des objectifs SMART (spécifiques, mesurables, atteignables, réalistes, temporels).", long: "Atteindre ses objectifs de vie à long terme." },
                { id: "dev-2", name: "Confiance", court: "Renforcer sa confiance en soi pour affronter les défis avec assurance.", moyen: "Pratiquer l'auto-compassion et la reconnaissance de ses réussites.", long: "Avoir une confiance en soi inébranlable." },
                { id: "dev-3", name: "Résilience", court: "Développer sa résilience pour mieux rebondir après des épreuves.", moyen: "Apprendre des techniques de gestion du stress et de résilience.", long: "Devenir une personne résiliente face aux défis de la vie." },
                { id: "dev-4", name: "Clarté", court: "Clarifier ses priorités pour prendre des décisions alignées avec ses valeurs.", moyen: "Réfléchir régulièrement à ses valeurs et à ses priorités.", long: "Avoir une vision claire de sa vie et de ses objectifs." }
            ]},
            { id: "relations", name: "Relations sociales", theme: "relations", subPillars: [
                { id: "rel-0", name: "Amis", court: "Entretenir des amitiés sincères pour bâtir un réseau de soutien solide.", moyen: "Prendre régulièrement des nouvelles de ses amis.", long: "Avoir des amitiés durables et significatives." },
                { id: "rel-1", name: "Réseau", court: "Élargir son réseau relationnel pour ouvrir de nouvelles opportunités.", moyen: "Participer à des événements de réseautage ou rejoindre des groupes d'intérêt.", long: "Avoir un réseau relationnel diversifié et enrichissant." },
                { id: "rel-2", name: "Écoute", court: "Pratiquer une écoute active pour mieux comprendre les autres.", moyen: "Développer ses compétences en communication et en écoute active.", long: "Être reconnu comme un interlocuteur attentif et empathique." },
                { id: "rel-3", name: "Partage", court: "Partager des expériences positives pour renforcer les liens humains.", moyen: "Organiser des activités ou des sorties avec ses proches.", long: "Avoir des relations basées sur le partage et la solidarité." },
                { id: "rel-4", name: "Qualité", court: "Prioriser la qualité des relations plutôt que leur quantité pour vivre des interactions profondes.", moyen: "Investir du temps dans les relations importantes.", long: "Avoir des relations profondes et épanouissantes." }
            ]},
            { id: "cadrevie", name: "Cadre de vie", theme: "cadrevie", subPillars: [
                { id: "cad-0", name: "Logement", court: "Créer un espace de vie confortable et fonctionnel pour se sentir chez soi.", moyen: "Aménager son espace de vie de manière ergonomique.", long: "Avoir un logement qui reflète son style de vie et ses besoins." },
                { id: "cad-1", name: "Environnement", court: "Préserver un environnement sain et agréable pour améliorer son cadre de vie.", moyen: "Adopter des pratiques écologiques dans son quotidien.", long: "Vivre dans un environnement durable et respectueux de la nature." },
                { id: "cad-2", name: "Organisation", court: "Maintenir un espace bien rangé pour gagner en efficacité et sérénité.", moyen: "Mettre en place des systèmes d'organisation pour son espace de vie.", long: "Avoir un espace de vie toujours bien organisé." },
                { id: "cad-3", name: "Confort", court: "Optimiser son confort domestique pour se sentir détendu chez soi.", moyen: "Investir dans des éléments de confort pour son logement.", long: "Avoir un espace de vie confortable et accueillant." },
                { id: "cad-4", name: "Esthétique", court: "Embellir son espace de vie pour refléter sa personnalité et son style.", moyen: "Décorer son espace de vie selon ses goûts.", long: "Avoir un espace de vie esthétiquement plaisant et personnalisé." }
            ]}
        ];

        let currentObjectif = null;

        function afficherPiliersEtSousPiliers() {
            const sectionPiliers = document.getElementById('piliers');
            sectionPiliers.innerHTML = ''; // Clear previous content
            defaultPillarsData.forEach((pilier, indexPilier) => {
                const divPilier = document.createElement('div');
                divPilier.classList.add('pilier');
                divPilier.setAttribute('data-theme', pilier.theme);
                divPilier.innerHTML = `<h2>${pilier.name}</h2>`;

                pilier.subPillars.forEach((subPilier, indexSousPilier) => {
                    const divSousPilier = document.createElement('div');
                    divSousPilier.classList.add('sous-pilier');
                    divSousPilier.innerHTML = `
                        <h3>${subPilier.name}</h3>
                        <div class="objectif">
                            <input type="text" value="${subPilier.court}" ondblclick="ouvrirPopup('court', ${indexPilier}, ${indexSousPilier})">
                        </div>
                        <div class="objectif">
                            <input type="text" value="${subPilier.moyen}" ondblclick="ouvrirPopup('moyen', ${indexPilier}, ${indexSousPilier})">
                        </div>
                        <div class="objectif">
                            <input type="text" value="${subPilier.long}" ondblclick="ouvrirPopup('long', ${indexPilier}, ${indexSousPilier})">
                        </div>
                    `;
                    divPilier.appendChild(divSousPilier);
                });

                sectionPiliers.appendChild(divPilier);
            });
        }

        function ouvrirPopup(terme, indexPilier, indexSousPilier) {
            currentObjectif = { terme, indexPilier, indexSousPilier };
            const subPilier = defaultPillarsData[indexPilier].subPillars[indexSousPilier];
            document.getElementById('popup-text').value = subPilier[terme];
            document.getElementById('popup').style.display = 'block';
        }

        function modifierObjectif() {
            if (currentObjectif) {
                const { terme, indexPilier, indexSousPilier } = currentObjectif;
                const nouveauTexte = document.getElementById('popup-text').value;
                defaultPillarsData[indexPilier].subPillars[indexSousPilier][terme] = nouveauTexte;
                localStorage.setItem('piliers', JSON.stringify(defaultPillarsData));
                console.log("Objectif modifié et enregistré dans localStorage :", defaultPillarsData[indexPilier].subPillars[indexSousPilier]);
                fermerPopup();
                location.reload();
            }
        }

        function supprimerObjectif() {
            if (currentObjectif) {
                const { terme, indexPilier, indexSousPilier } = currentObjectif;
                defaultPillarsData[indexPilier].subPillars[indexSousPilier][terme] = "";
                localStorage.setItem('piliers', JSON.stringify(defaultPillarsData));
                console.log("Objectif supprimé et enregistré dans localStorage :", defaultPillarsData[indexPilier].subPillars[indexSousPilier]);
                fermerPopup();
                location.reload();
            }
        }

        function fermerPopup() {
            document.getElementById('popup').style.display = 'none';
        }

        window.onload = function() {
            const piliersLocalStorage = localStorage.getItem('piliers');
            if (piliersLocalStorage) {
                try {
                    const parsedData = JSON.parse(piliersLocalStorage);
                    console.log("Données récupérées du localStorage :", parsedData);
                    // Vérifiez si les données sont un tableau et ont la bonne structure
                    if (Array.isArray(parsedData) && parsedData.length === defaultPillarsData.length) {
                        parsedData.forEach((pilier, index) => {
                            if (defaultPillarsData[index]) {
                                defaultPillarsData[index] = pilier;
                            }
                        });
                    } else {
                        console.error("Les données récupérées du localStorage ne sont pas dans le bon format.");
                    }
                } catch (e) {
                    console.error("Erreur lors de la récupération des données du localStorage :", e);
                }
            }
            console.log("Données des piliers après fusion :", defaultPillarsData);
            afficherPiliersEtSousPiliers();
        }
    </script>
</body>
</html>
