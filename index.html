<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion d'Objectifs de Vie</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f8ff;
        }
        header {
            background-color: #4CAF50;
            color: white;
            padding: 1em;
            width: 100%;
            text-align: center;
        }
        main {
            padding: 1em;
            width: 100%;
            max-width: 800px;
            text-align: center;
        }
        .pilier {
            margin-bottom: 2em;
        }
        .pilier h2 {
            border-bottom: 2px solid;
            padding-bottom: 0.5em;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .pilier h2 img {
            width: 30px;
            height: 30px;
            margin-right: 10px;
        }
        .sous-pilier {
            margin-bottom: 1em;
        }
        .sous-pilier h3 {
            margin-bottom: 0.5em;
        }
        .objectif {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5em;
        }
        .objectif input {
            flex-grow: 1;
            padding: 0.5em;
            margin-right: 0.5em;
            cursor: pointer;
        }
        .objectif button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 0.5em;
            cursor: pointer;
        }
        .objectif button:hover {
            background-color: #45a049;
        }
        .navigation {
            margin-top: 2em;
        }
        .navigation button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 0.5em 1em;
            cursor: pointer;
            margin: 0 0.5em;
        }
        .navigation button:hover {
            background-color: #45a049;
        }
        .pilier[data-theme="sante"] h2 {
            border-color: #FF6347;
        }
        .pilier[data-theme="famille"] h2 {
            border-color: #FFD700;
        }
        .pilier[data-theme="finances"] h2 {
            border-color: #32CD32;
        }
        .pilier[data-theme="carriere"] h2 {
            border-color: #1E90FF;
        }
        .pilier[data-theme="loisirs"] h2 {
            border-color: #FF69B4;
        }
        .pilier[data-theme="devperso"] h2 {
            border-color: #8A2BE2;
        }
        .pilier[data-theme="relations"] h2 {
            border-color: #FF4500;
        }
        .pilier[data-theme="cadrevie"] h2 {
            border-color: #00CED1;
        }
    </style>
</head>
<body>
    <header>
        <h1>Gestion d'Objectifs de Vie</h1>
    </header>
    <main>
        <section id="accueil">
            <h2>Bienvenue dans l'application de Gestion d'Objectifs de Vie</h2>
            <p>Cette application vous aide √† d√©finir et √† suivre vos objectifs dans diff√©rents domaines de votre vie.</p>
            <button onclick="afficherPilier(0)">Commencer</button>
        </section>
        <section id="pilier" style="display:none;">
            <!-- Les piliers seront dynamiquement g√©n√©r√©s ici -->
        </section>
        <div class="navigation">
            <button onclick="afficherPilier(currentIndex - 1)">Pr√©c√©dent</button>
            <button onclick="afficherPilier(currentIndex + 1)">Suivant</button>
        </div>
    </main>
    <div id="popup" style="display:none; position:fixed; left:50%; top:50%; transform:translate(-50%, -50%); background:white; border:1px solid #ccc; padding:2em; z-index:1000;">
        <textarea id="popup-text" rows="4" cols="50"></textarea><br>
        <button onclick="modifierObjectif()">Modifier</button>
        <button onclick="supprimerObjectif()">Supprimer</button>
        <button onclick="fermerPopup()">Fermer</button>
    </div>
    <script>
        const defaultPillarsData = [
            { id: "sante", name: "Sant√©", theme: "sante", icon: "üè•", subPillars: [
                { id: "sante-phy", name: "Physique", court: "Am√©liorer sa condition physique pour se sentir plus √©nergique au quotidien.", moyen: "Int√©grer une routine d'exercice r√©guli√®re.", long: "Atteindre un niveau de forme physique optimal." },
                { id: "sante-men", name: "Mental", court: "Cultiver un √©tat d'esprit positif pour mieux faire face aux d√©fis de la vie.", moyen: "Pratiquer la m√©ditation ou le journaling.", long: "D√©velopper une r√©silience mentale durable." },
                { id: "sante-som", name: "Sommeil", court: "Obtenir un sommeil r√©parateur pour maximiser son bien-√™tre g√©n√©ral.", moyen: "√âtablir une routine de sommeil r√©guli√®re.", long: "Optimiser son environnement de sommeil pour un repos optimal." },
                { id: "sante-nut", name: "Nutrition", court: "Adopter une alimentation √©quilibr√©e pour maintenir une bonne sant√© √† long terme.", moyen: "Planifier des repas sains et √©quilibr√©s.", long: "Maintenir une alimentation saine comme mode de vie." },
                { id: "sante-ene", name: "√ânergie", court: "Augmenter son niveau d'√©nergie pour accomplir ses t√¢ches quotidiennes avec efficacit√©.", moyen: "Identifier et √©liminer les sources de fatigue.", long: "Maintenir un niveau d'√©nergie √©lev√© gr√¢ce √† des habitudes saines." }
            ]},
            { id: "famille", name: "Famille", theme: "famille", icon: "üë®‚Äçüë©‚Äçüë¶", subPillars: [
                { id: "fam-pro", name: "Proches", court: "Renforcer les liens avec ses proches pour cr√©er un sentiment d'appartenance.", moyen: "Organiser des activit√©s familiales r√©guli√®res.", long: "Construire des relations familiales solides et durables." },
                { id: "fam-com", name: "Communication", court: "Am√©liorer la communication familiale pour √©viter les malentendus.", moyen: "Pratiquer l'√©coute active au sein de la famille.", long: "√âtablir une communication ouverte et honn√™te." },
                { id: "fam-tmp", name: "Temps pass√©", court: "Passer plus de moments de qualit√© ensemble pour renforcer les relations familiales.", moyen: "Planifier des sorties ou des activit√©s en famille.", long: "Cr√©er des souvenirs familiaux m√©morables." },
                { id: "fam-sou", name: "Soutien", court: "Offrir et recevoir un soutien mutuel pour surmonter les difficult√©s.", moyen: "√ätre pr√©sent pour les membres de la famille en cas de besoin.", long: "Construire un r√©seau de soutien familial fort." },
                { id: "fam-har", name: "Harmonie", court: "Maintenir une atmosph√®re paisible et harmonieuse au sein de la famille.", moyen: "R√©soudre les conflits de mani√®re constructive.", long: "Cr√©er un environnement familial serein et √©quilibr√©." }
            ]},
            // Ajoutez les autres piliers ici...
        ];

        let currentIndex = 0;
        let currentObjectif = null;

        function afficherPilier(index) {
            if (index >= 0 && index < defaultPillarsData.length) {
                currentIndex = index;
                const sectionPilier = document.getElementById('pilier');
                const sectionAccueil = document.getElementById('accueil');
                sectionAccueil.style.display = 'none';
                sectionPilier.style.display = 'block';
                sectionPilier.innerHTML = ''; // Clear previous content

                const pilier = defaultPillarsData[index];
                const divPilier = document.createElement('div');
                divPilier.classList.add('pilier');
                divPilier.setAttribute('data-theme', pilier.theme);
                divPilier.innerHTML = `<h2><img src="${pilier.icon}" alt="${pilier.name}"> ${pilier.name}</h2>`;

                pilier.subPillars.forEach((subPilier, indexSousPilier) => {
                    const divSousPilier = document.createElement('div');
                    divSousPilier.classList.add('sous-pilier');
                    divSousPilier.innerHTML = `
                        <h3>${subPilier.name}</h3>
                        <div class="objectif">
                            <input type="text" value="${subPilier.court}" ondblclick="ouvrirPopup('court', ${index}, ${indexSousPilier})">
                        </div>
                        <div class="objectif">
                            <input type="text" value="${subPilier.moyen}" ondblclick="ouvrirPopup('moyen', ${index}, ${indexSousPilier})">
                        </div>
                        <div class="objectif">
                            <input type="text" value="${subPilier.long}" ondblclick="ouvrirPopup('long', ${index}, ${indexSousPilier})">
                        </div>
                    `;
                    divPilier.appendChild(divSousPilier);
                });

                sectionPilier.appendChild(divPilier);
            }
        }

        function ouvrirPopup(terme, indexPilier, indexSousPilier) {
            currentObjectif = { terme, indexPilier, indexSousPilier };
            const subPilier = defaultPillarsData[indexPilier].subPillars[indexSousPilier];
            document.getElementById('popup-text').value = subPilier[terme];
            document.getElementById('popup').style.display = 'block';
        }

        function modifierObjectif() {
            if (currentObjectif) {
                const { terme, indexPilier, indexSousPilier } = currentObjectif;
                const nouveauTexte = document.getElementById('popup-text').value;
                defaultPillarsData[indexPilier].subPillars[indexSousPilier][terme] = nouveauTexte;
                localStorage.setItem('piliers', JSON.stringify(defaultPillarsData));
                fermerPopup();
                afficherPilier(currentIndex);
            }
        }

        function supprimerObjectif() {
            if (currentObjectif) {
                const { terme, indexPilier, indexSousPilier } = currentObjectif;
                defaultPillarsData[indexPilier].subPillars[indexSousPilier][terme] = "";
                localStorage.setItem('piliers', JSON.stringify(defaultPillarsData));
                fermerPopup();
                afficherPilier(currentIndex);
            }
        }

        function fermerPopup() {
            document.getElementById('popup').style.display = 'none';
        }

        window.onload = function() {
            const piliersLocalStorage = localStorage.getItem('piliers');
            if (piliersLocalStorage) {
                try {
                    const parsedData = JSON.parse(piliersLocalStorage);
                    if (Array.isArray(parsedData) && parsedData.length === defaultPillarsData.length) {
                        parsedData.forEach((pilier, index) => {
                            if (defaultPillarsData[index]) {
                                defaultPillarsData[index] = pilier;
                            }
                        });
                    }
                } catch (e) {
                    console.error("Erreur lors de la r√©cup√©ration des donn√©es du localStorage :", e);
                }
            }
        }
    </script>
</body>
</html>
